(this["webpackJsonpmern-client"]=this["webpackJsonpmern-client"]||[]).push([[0],{58:function(e,n,t){e.exports=t(74)},63:function(e,n,t){},74:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t.n(r),c=t(34),o=t.n(c),i=(t(63),t(17)),u=t(7),l=t(14),s=t(57),d=t(9),m=t(4),f=t(5),p=t(20),g=t.n(p),b=t(24),v=t(25),h=t(49),E=t(50),O=t(42),x=t.n(O),j=new(function(){function e(){Object(h.a)(this,e)}return Object(E.a)(e,[{key:"getProfile",value:function(){return x()(this.getToken())}},{key:"loggedIn",value:function(){var e=this.getToken();return!!e&&!this.isTokenExpired(e)}},{key:"isTokenExpired",value:function(e){try{return x()(e).exp<Date.now()/1e3}catch(n){return!1}}},{key:"getToken",value:function(){return localStorage.getItem("id_token")}},{key:"login",value:function(e){localStorage.setItem("id_token",e),window.location.assign("/")}},{key:"logout",value:function(){localStorage.removeItem("id_token"),localStorage.removeItem("email"),localStorage.removeItem("firstName"),localStorage.removeItem("lastName"),window.location.assign("/")}}]),e}()),y=t(12);function S(e){return e.length>300?e.substring(0,550)+"...":e}function w(e,n,t){return new Promise((function(r,a){var c,o,i,u=window.indexedDB.open("media-store",1);u.onupgradeneeded=function(e){var n=u.result;n.createObjectStore("products",{keyPath:"_id"}),n.createObjectStore("categories",{keyPath:"_id"}),n.createObjectStore("cart",{keyPath:"_id"})},u.onerror=function(e){console.log("There was an error")},u.onsuccess=function(a){switch(c=u.result,o=c.transaction(e,"readwrite"),i=o.objectStore(e),c.onerror=function(e){console.log("error",e)},n){case"put":i.put(t),r(t);break;case"get":var l=i.getAll();l.onsuccess=function(){r(l.result)};break;case"delete":i.delete(t._id)}o.oncomplete=function(){c.close()}}}))}var _=t(33),k=t.n(_),T=t(21),N=t.n(T);function A(){var e=Object(m.a)(["\n  mutation addOrder($products: [ID]!) {\n    addOrder(products: $products) {\n      purchaseDate\n      products {\n        _id\n      name\n      description\n      price\n      quantity\n      category {\n        name\n      } \n      }\n    }\n  }\n"]);return A=function(){return e},e}function C(){var e=Object(m.a)(["\n  mutation addUser($firstName: String!, $lastName: String!, $email: String!) {\n    addUser(firstName: $firstName, lastName: $lastName, email: $email) {\n      user{\n        _id\n      }\n    }\n  }\n"]);return C=function(){return e},e}function I(){var e=Object(m.a)(["\nmutation updateProduct($_id:ID!,$value:Float!,$bidTimeStamp:String!,$bidderName:String!,$bidderId:String!){\n  updateProduct(_id:$_id,value:$value,bidTimeStamp:$bidTimeStamp,bidderName:$bidderName,bidderId:$bidderId){\n  bidValue\n  bidTimeStamp \n  bidderId\n  name\n  _id\n  }\n}"]);return I=function(){return e},e}var D=N()(I()),R=N()(C()),P=N()(A());function U(){var e=Object(m.a)(["\n    height:20px;\n    width: 55px;\n    border-radius:20px;\n    font-size:14px;\n    margin-left:15px;\n    margin-right:5px;\n    outline:none;\n    text-align:center;\n    "]);return U=function(){return e},e}function $(){var e=Object(m.a)(["\n    font-size:16px;\n    border-radius: 20px;\n    height: 20px;\n    margin-left:35px;\n    outline:none;\n    cursor:pointer;\n    background-color: #00A598;\n    box-shadow: 3px 3px;\n    white-space: nowrap;\n    "]);return $=function(){return e},e}function L(){var e=Object(m.a)(["\n    font-size:16px;\n    border-radius: 20px;\n    height: 20px;\n \n    margin-left:5px;\n    outline:none;\n    cursor:pointer;\n    background-color: #3B7EA1;\n    box-shadow: 3px 3px;\n    white-space: nowrap;\n    "]);return L=function(){return e},e}function q(){var e=Object(m.a)(["\n    font-size:16px;\n    border-radius: 20px;\n    height: 20px;\n    margin-left:5px;\n    outline:none;\n    cursor:pointer;\n    background-color: ",";\n    box-shadow: 3px 3px;\n    color:#000;\n    white-space: nowrap;\n    "]);return q=function(){return e},e}function M(){var e=Object(m.a)(["\n    margin-left:35px;\n    font-size:14px;\n    "]);return M=function(){return e},e}function B(){var e=Object(m.a)(["\n    margin-left:30px;\n    font-size:16px;\n    "]);return B=function(){return e},e}function F(){var e=Object(m.a)(["\n    border-top: 5px solid #FDB515;\n    display:flex;\n    flex-direction: column;\n    margin-left:10px;\n    width:80%;\n    "]);return F=function(){return e},e}function z(){var e=Object(m.a)(["\n    display:flex;\n    margin-top:20px;\n    "]);return z=function(){return e},e}function G(){var e=Object(m.a)(["\n    display:flex;\n    margin-top:6px;\n    "]);return G=function(){return e},e}function V(){var e=Object(m.a)(["\n    height:200px;\n    width:150px;\n    background-image:url('images/","');\n    background-repeat: no-repeat;\n    background-size: cover;\n    "]);return V=function(){return e},e}function W(){var e=Object(m.a)(["\n    width:1000px;\n    height:220px;\n    padding:5px;\n    display:flex;\n    justify-content:space-between;\n    "]);return W=function(){return e},e}var H=function(e){var n=e._id,t=e.image,c=e.title,o=e.price,i=e.description,u=e.cart,l=e.bidTimeStamp,s=e.bidValue,m=e.bidderName,p=Object(d.b)(),h=Object(y.b)(D),E=Object(v.a)(h,1)[0],O=s+1;function x(e){return("0"+e).slice(-2)}function w(){return(w=Object(b.a)(g.a.mark((function e(){var t,r,a,c,o;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((t=document.querySelector("#bidInput"+n).value)||(t=O),t&&!(t<=s)){e.next=4;break}return e.abrupt("return");case 4:return r=localStorage.getItem("email"),a=localStorage.getItem("firstName"),c=localStorage.getItem("lastName"),o=l||k()().format(),e.next=10,E({variables:{_id:n,value:parseFloat(t),bidTimeStamp:o.toString(),bidderName:a+" "+c,bidderId:r}});case 10:e.sent;case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(r.useEffect)((function(){setInterval((function(){if(!l)return;var t=k()(l).format(),r=k()();e=k.a.duration(r.diff(t));var a=Math.floor(120-e.asSeconds());if(a<=0)return void(document.querySelector("#remainingTime"+n)&&(document.querySelector("#remainingTime"+n).textContent="Sold!"));document.querySelector("#remainingTime"+n)&&(document.querySelector("#remainingTime"+n).textContent=function(e){var n=Math.floor(e/60);e%=60;var t=Math.floor(n/60);return n%=60,"".concat(x(t),":").concat(x(n),":").concat(x(e))}(a))}),1e3);var e=0}),[p]);var _=f.a.div(W()),T=f.a.div(V(),t),N=f.a.div(G()),A=f.a.div(z()),C=f.a.div(F()),I=f.a.h3(B()),R=f.a.h4(M()),P=f.a.button(q(),(function(e){return e.delete?"tomato":"#FDB515"})),H=P,Y=f.a.button(L()),J=(f.a.button($()),f.a.input.attrs({type:"number"})(U()));return"no"===u?a.a.createElement(_,null,a.a.createElement(T,null),a.a.createElement(C,null,a.a.createElement(N,null,a.a.createElement("h5",null,a.a.createElement("b",null,c)),a.a.createElement(I,null,a.a.createElement("b",null,"$",o)),a.a.createElement(P,{onClick:function(){p({type:"ADD_TO_CART",product:{_id:n,image:t,title:c,price:o,description:i}})}},"Buy Now"),a.a.createElement(Y,{onClick:function(){j.loggedIn()?function(){w.apply(this,arguments)}():alert("you must be logged in to place bids!")}},"Bid"),a.a.createElement(J,{id:"bidInput"+n,placeholder:O,step:"1",min:O}),a.a.createElement("span",{id:"remainingTime"+n})," ",a.a.createElement(R,{className:"fa"},"\uf201 ",m||"")),a.a.createElement(A,null,a.a.createElement("p",null,S(i))))):"yes"===u?a.a.createElement(_,null,a.a.createElement(T,null),a.a.createElement(C,null,a.a.createElement(N,null,a.a.createElement("h5",null,a.a.createElement("b",null,c)),a.a.createElement(I,null,a.a.createElement("b",null,"$",o)),a.a.createElement(H,{delete:!0,onClick:function(){p({type:"REMOVE_FROM_CART",_id:n})}},"Remove")),a.a.createElement(A,null,a.a.createElement("p",null,S(i))))):void 0};function Y(){var e=Object(m.a)(["\n{\n  user {\n    firstName\n    lastName\n    orders {\n      _id\n      purchaseDate\n      products {\n        _id\n        name\n        description\n        price\n        quantity\n        image\n      }\n    }\n  }\n}\n"]);return Y=function(){return e},e}function J(){var e=Object(m.a)(["\n  query getCheckout($products: [ID]!) {\n    checkout(products: $products) {\n      session\n    }\n  }\n"]);return J=function(){return e},e}function Q(){var e=Object(m.a)(["\nquery products($category: ID, $name: String){\n    products (category:$category,name:$name)\n    {\n      \n            _id\n            name\n            description\n            image\n            price\n            bidderName\n            bidValue\n            bidTimeStamp\n            sold\n            category {\n              _id\n              name\n            }\n        \n    \n    }\n    \n    }\n    \n"]);return Q=function(){return e},e}function K(){var e=Object(m.a)(["\n\nquery user($email:String) {\n\n  user(email:$email) {\n    \n    \n      messages\n      orders {\n        products \n        {\n          \n                _id\n                \n              \n        }\n\n      }\n    \n  }\n}\n\n"]);return K=function(){return e},e}function X(){var e=Object(m.a)(["\nquery categories {\n  \n    categories{\n        _id\n      name\n    }\n  }"]);return X=function(){return e},e}var Z=N()(X()),ee=N()(K()),ne=N()(Q()),te=N()(J()),re=N()(Y());function ae(){var e=Object(m.a)(["\n    display:flex;\n    justify-content: center;\n    "]);return ae=function(){return e},e}function ce(){var e=Object(m.a)(["\n    display:flex;\n    flex-direction:column;\n    justify-content: center;\n    margin-top:50px;\n    "]);return ce=function(){return e},e}var oe=function(){var e=Object(d.c)((function(e){return e})),n=Object(d.b)(),t=e.currentCategory,c=e.currentSearch,o=Object(y.c)(ne),i=o.loading,u=o.data;Object(r.useEffect)((function(){u?(n({type:"UPDATE_PRODUCTS",products:u.products}),u.products.forEach((function(e){w("products","put",e)}))):i||w("products","get").then((function(e){n({type:"UPDATE_PRODUCTS",products:e})}))}),[u,i,n]);var l=f.a.div(ce()),s=f.a.div(ae());return a.a.createElement(s,null,a.a.createElement(l,null,function(){var n=e.products;return t&&(n=n.filter((function(e){return e.category._id===t}))),c&&(n=n.filter((function(e){return e.name.toLowerCase().includes(c.toLowerCase())}))),n}().map((function(e){return a.a.createElement(H,{_id:e._id,image:e.image,title:e.name,price:e.price,key:e._id,bidValue:e.bidValue,description:e.description,bidderName:e.bidderName,bidTimeStamp:e.bidTimeStamp,cart:"no"})}))))},ie=null,ue=function(){var e=Object(d.b)();Object(r.useEffect)((function(){var t=new EventSource("http://localhost:3001/events");new EventSource("http://localhost:3001/events").addEventListener("UPDATE_MESSAGES",(function(n){var t=JSON.parse(n.data),r=n.type;e({type:r,messages:t.messages.reverse()})})),t.addEventListener("UPDATE_PRODUCTS",(function(t){var r=JSON.parse(t.data),a=t.type;if(ie){if(n(r))return}else ie=r;ie=r,e({type:a,products:r})}),!1)}),[e]);var n=function(e){if(e.length!=ie.length)return!1;for(var n=0;n<e.length;n++)for(var t in e[n])if(e[n][t]!=ie[n][t])return!1;return!0};return a.a.createElement(oe,null)},le=t(39);var se=function(e){var n=Object(y.b)(R),t=Object(v.a)(n,1)[0];return a.a.createElement("div",{className:"container signin"},a.a.createElement(le.GoogleLogin,{clientId:"900972042486-ho4224klutu5ot121jh6nao4d2tnfp8q.apps.googleusercontent.com",buttonText:"Google Login",onSuccess:function(e){var n=e.getAuthResponse().id_token;localStorage.setItem("email",e.profileObj.email),localStorage.setItem("firstName",e.profileObj.givenName),localStorage.setItem("lastName",e.profileObj.familyName),localStorage.setItem("id_token",n),j.login(n);t({variables:{firstName:e.profileObj.givenName,lastName:e.profileObj.familyName,email:e.profileObj.email}});!function(e){var n=1e3*(e.tokenObj.expires_in||3300),t=function(){var r=Object(b.a)(g.a.mark((function r(){var a;return g.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e.reloadAuthResponse();case 2:a=r.sent,n=1e3*(a.expires_in||3300),j.login(a.id_token),setTimeout(t,n);case 6:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}();setTimeout(t,n)}(e)},onFailure:function(e){console.log("{Login Failes] res:",e)},cookiePolicy:"single_host_origin",isSignedIn:!0,theme:"dark",icon:"true"}),",",document.getElementById("googleButton"))},de=t(27),me=t(56);function fe(){var e=Object(m.a)(["\n    font-size:20px;\n    color:#fff;\n    border-radius: 20px;\n    height: 24px;\n    margin-top:35px;\n    outline:none;\n    cursor:pointer;\n    width:125px;\n    text-align:center;\n    background-color: #333;\n    border: 2px solid #ccc;\n    white-space: nowrap;\n    display:flex;\n    align-items:center;\n    "]);return fe=function(){return e},e}function pe(){var e=Object(m.a)(["\n    margin-bottom:20px;\n    "]);return pe=function(){return e},e}function ge(){var e=Object(m.a)(["\n    display:flex;\n    justify-content: center;\n    "]);return ge=function(){return e},e}function be(){var e=Object(m.a)(["\n    display:flex;\n    flex-direction:column;\n    justify-content: center;\n    margin-top:50px;\n    "]);return be=function(){return e},e}var ve=function(){var e=Object(me.a)("pk_test_TYooMQauvdEDq54NiTphI7jx"),n=Object(d.c)((function(e){return e})),t=Object(d.b)(),c=n.cart;c.forEach((function(e){w("cart","put",e)}));var o=Object(y.a)(te),i=Object(v.a)(o,2),u=i[0],l=i[1].data;Object(r.useEffect)((function(){l&&e.then((function(e){e.redirectToCheckout({sessionId:l.checkout.session})}))}),[l]),Object(r.useEffect)((function(){function e(){return(e=Object(b.a)(g.a.mark((function e(){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w("cart","get");case 2:n=e.sent,t({type:"ADD_MULTIPLE_TO_CART",products:Object(de.a)(n)});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}c.length||function(){e.apply(this,arguments)}()}),[c.length,t]);var s=f.a.div(be()),m=f.a.div(ge()),p=f.a.div(pe()),h=f.a.button(fe());return a.a.createElement(m,null,a.a.createElement(s,null,a.a.createElement(p,null,"Your Shopping Cart"),c.map((function(e,n){return a.a.createElement(H,{_id:e._id,image:e.image,title:e.name,price:e.price,key:e._id+n,description:e.description,cart:"yes"})})),a.a.createElement("div",{className:"flex-row space-between"},a.a.createElement("strong",null,"Total: $",function(){var e=0;return c.forEach((function(n){e+=n.price})),e.toFixed(2)}()),j.loggedIn()?a.a.createElement(h,{onClick:function(){var e=[];c.forEach((function(n){e.push(n._id)})),u({variables:{products:e}})}},"Checkout"):a.a.createElement("span",null,"(log in to check out)"))))};function he(){var e=Object(m.a)(["\n  color:#333;\n  "]);return he=function(){return e},e}function Ee(){var e=Object(m.a)(["\n  list-style-type: none;\n\n  "]);return Ee=function(){return e},e}var Oe=localStorage.getItem("email");localStorage.getItem("firstName"),localStorage.getItem("lastName");var xe=function(){var e=Object(d.c)((function(e){return e})),n=e.cart,t=e.messages,r=f.a.ul(Ee()),c=f.a.ul(he());return a.a.createElement("nav",null,j.loggedIn()?a.a.createElement(r,{className:"flex-row"},a.a.createElement("li",{className:"mx-1"},a.a.createElement(i.c,{to:"/orderHistory"},"Orders")),a.a.createElement("li",{className:"mx-1"},a.a.createElement("a",{href:"/",onClick:function(){j.logout()}},Oe&&a.a.createElement(le.GoogleLogout,{clientId:"900972042486-ho4224klutu5ot121jh6nao4d2tnfp8q.apps.googleusercontent.com",buttonText:"Logout",render:function(e){return a.a.createElement("div",{onClick:e.onClick,disabled:e.disabled},"Logout")},theme:"dark"}))),a.a.createElement("li",null,"  ",a.a.createElement(i.c,{to:"/cart"},a.a.createElement(c,{className:"fa"},"\uf291 (",n.length,")"))),a.a.createElement("li",null,a.a.createElement(i.c,{to:"/messages"},a.a.createElement(c,{className:"fa"},"\uf674 (",t.length,")")))):a.a.createElement(r,{className:"flex-row"},a.a.createElement("li",{className:"mx-1"}),"/login"!==window.location.pathname&&a.a.createElement("li",{className:"mx-1"},a.a.createElement(i.c,{to:"/login"},"Login"))))};function je(){var e=Object(m.a)(["\n    border:1px solid #000;\n    width: 55%;\n    border-radius: 20px 20px;\n    display:flex;\n    justify-content:space-between;\n    "]);return je=function(){return e},e}function ye(){var e=Object(m.a)(["\n    width:80px;\n    height:26px;\n    border:0px;\n    margin-left:20px;\n    padding-left:5px;\n    outline: none;\n    "]);return ye=function(){return e},e}function Se(){var e=Object(m.a)(["\n    padding-top:3px;\n    font-size:18px;\n    background-color: #FDB515;\n    border-left:0px;\n    width: 50px;\n    border-radius: 0 20px 20px 0;\n    cursor:pointer;\n    text-align: center;\n\n    "]);return Se=function(){return e},e}function we(){var e=Object(m.a)(["\n    padding: 20px;\n    display:flex;\n    height:30px;\n    width:100%;\n    align-items:center;\n    justify-content:space-between;\n    border-bottom: 1px solid #888;\n    "]);return we=function(){return e},e}function _e(){var e=Object(m.a)(["\n    width: 55%;\n    height: 100%;\n    font-size:18px;\n    border: 0px;\n    border-right:0px; \n    border-left:0px; \n    outline:0px;\n    "]);return _e=function(){return e},e}function ke(){var e=Object(m.a)(["\n    margin-left: 30px;\n    "]);return ke=function(){return e},e}var Te=function(){var e=localStorage.getItem("email"),n=(f.a.h1(ke()),f.a.input(_e())),t=f.a.div(we()),c=f.a.div(Se()),o=f.a.select(ye()),u=f.a.div(je()),l=Object(d.c)((function(e){return e})),s=Object(d.b)(),m=l.currentCategory,p=l.currentSearch,g=Object(y.c)(Z),b=g.loading,v=g.data,h=Object(y.c)(ee,{variables:{email:e}});return Object(r.useEffect)((function(){h.data&&h.data.user&&s({type:"UPDATE_MESSAGES",messages:h.data.user.messages.reverse()})}),[h.data,s]),Object(r.useEffect)((function(){v?(s({type:"UPDATE_CATEGORIES",categories:v.categories}),v.categories.forEach((function(e){w("categories","put",e)}))):b||w("categories","get").then((function(e){s({type:"UPDATE_CATEGORIES",categories:e})}))}),[v,b,s]),a.a.createElement(t,null,a.a.createElement(i.c,{to:"/"},a.a.createElement("span",{role:"img","aria-label":"shopping bag"},"\ud83d\udecd\ufe0f"),"Media Store"),a.a.createElement(u,null,a.a.createElement(o,{onChange:function(e){var n=document.querySelector("#searchInput").value,t=e.target.value;s({type:"UPDATE_CURRENT_SEARCH",currentSearch:n}),s({type:"UPDATE_CURRENT_CATEGORY",currentCategory:t})},value:m},l.categories.map((function(e){return a.a.createElement("option",{key:e._id,value:e._id},e.name)})),a.a.createElement("option",{key:"all123",value:""},"All")),a.a.createElement(n,{id:"searchInput",defaultValue:p}),a.a.createElement(c,{onClick:function(e){var n=document.querySelector("#searchInput").value;s({type:"UPDATE_CURRENT_SEARCH",currentSearch:n})},className:"fa"},"\uf002")),a.a.createElement(xe,null))},Ne=t(8),Ae={products:[],cart:[],categories:[],messages:[],currentCategory:"",currentSearch:""},Ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ae,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"UPDATE_MESSAGES":return Object(Ne.a)(Object(Ne.a)({},e),{},{messages:n.messages});case"UPDATE_PRODUCTS":return Object(Ne.a)(Object(Ne.a)({},e),{},{products:Object(de.a)(n.products)});case"UPDATE_CATEGORIES":return Object(Ne.a)(Object(Ne.a)({},e),{},{categories:Object(de.a)(n.categories)});case"UPDATE_CURRENT_CATEGORY":return Object(Ne.a)(Object(Ne.a)({},e),{},{currentCategory:n.currentCategory});case"UPDATE_CURRENT_SEARCH":return Object(Ne.a)(Object(Ne.a)({},e),{},{currentSearch:n.currentSearch});case"ADD_TO_CART":return Object(Ne.a)(Object(Ne.a)({},e),{},{cart:[].concat(Object(de.a)(e.cart),[n.product])});case"ADD_MULTIPLE_TO_CART":return Object(Ne.a)(Object(Ne.a)({},e),{},{cart:[].concat(Object(de.a)(e.cart),Object(de.a)(n.products))});case"REMOVE_FROM_CART":var t=e.cart.filter((function(e){return e._id!==n._id}));return Object(Ne.a)(Object(Ne.a)({},e),{},{cart:t});case"UPDATE_CART_QUANTITY":return Object(Ne.a)(Object(Ne.a)({},e),{},{cart:e.cart.map((function(e){return n._id===e._id&&(e.purchaseQuantity=n.purchaseQuantity),e}))});case"CLEAR_CART":return Object(Ne.a)(Object(Ne.a)({},e),{},{cart:[]});default:return e}},Ie=t(35),De=Object(Ie.b)(Ce);var Re=function(){var e,n=Object(y.c)(re).data;return n&&(e=n.user),a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"container my-1"},a.a.createElement(i.b,{to:"/"},"\u2190 Back to Products"),e?a.a.createElement(a.a.Fragment,null,a.a.createElement("h2",null,"Order History for ",e.firstName," ",e.lastName),e.orders.map((function(e){return a.a.createElement("div",{key:e._id,className:"my-2"},a.a.createElement("h3",null,new Date(parseInt(e.purchaseDate)).toLocaleDateString()),a.a.createElement("div",{className:"flex-row"},e.products.map((function(e,n){var t=e._id,r=e.image,c=e.name,o=e.price;return a.a.createElement("div",{key:n,className:"card px-1 py-1"},a.a.createElement(i.b,{to:"/products/".concat(t)},a.a.createElement("img",{alt:c,src:"/images/".concat(r)}),a.a.createElement("p",null,c)),a.a.createElement("div",null,a.a.createElement("span",null,"$",o)))}))))}))):null))};var Pe=function(e){var n=e.children;return a.a.createElement("div",{style:{height:560,clear:"both",paddingTop:120,textAlign:"center"}},n)},Ue=function(){var e=Object(y.b)(P),n=Object(v.a)(e,1)[0];return Object(r.useEffect)((function(){function e(){return(e=Object(b.a)(g.a.mark((function e(){var t,r,a,c;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w("cart","get");case 2:if(t=e.sent,!(r=t.map((function(e){return e._id}))).length){e.next=11;break}return e.next=7,n({variables:{products:r}});case 7:a=e.sent,c=a.data,c.addOrder.products.forEach((function(e){w("cart","delete",e)}));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[n]),setTimeout((function(){window.location.assign("/")}),3e3),a.a.createElement("div",null,a.a.createElement(Pe,null,a.a.createElement("h1",null,"Success!"),a.a.createElement("h2",null,"Thank you for your purchase!"),a.a.createElement("h2",null,"You will now be redirected to the homepage")))};function $e(){var e=Object(m.a)(["\n    background-color:#fff;\n    position:absolute;\n    width:100%;\n    "]);return $e=function(){return e},e}function Le(){var e=Object(m.a)(["\n    color:#333;\n    "]);return Le=function(){return e},e}function qe(){var e=Object(m.a)(["\n    width:100%;\n    border-bottom:1px solid black;\n    "]);return qe=function(){return e},e}function Me(){var e=Object(m.a)(["\n    list-style-type: none;\n\n  "]);return Me=function(){return e},e}var Be=function(){var e=Object(d.c)((function(e){return e})).messages,n=f.a.ul(Me()),t=f.a.li(qe()),r=(f.a.ul(Le()),f.a.div($e()));return a.a.createElement(r,null,a.a.createElement(n,null,e.map((function(e,n){return a.a.createElement(t,{key:"message"+n},e)}))))},Fe=new s.a({request:function(e){var n=localStorage.getItem("id_token");e.setContext({headers:{authorization:n?"Bearer ".concat(n):""}})},uri:"http://localhost:3001/graphql"});var ze=function(){return a.a.createElement(l.a,{client:Fe},a.a.createElement(i.a,null,a.a.createElement("div",null,a.a.createElement(d.a,{store:De},a.a.createElement(Te,null),a.a.createElement(u.c,null,a.a.createElement(u.a,{exact:!0,path:"/",component:ue}),a.a.createElement(u.a,{exact:!0,path:"/login",component:se}),a.a.createElement(u.a,{exact:!0,path:"/cart",component:ve}),a.a.createElement(u.a,{exact:!0,path:"/orderHistory",component:Re}),a.a.createElement(u.a,{exact:!0,path:"/success",component:Ue}),a.a.createElement(u.a,{exact:!0,path:"/messages",component:Be}))))))},Ge=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Ve(e,n){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;null!=t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),n&&n.onUpdate&&n.onUpdate(e)):(console.log("Content is cached for offline use."),n&&n.onSuccess&&n.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}o.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(ze,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var n="".concat("","/service-worker.js");Ge?(!function(e,n){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(t){var r=t.headers.get("content-type");404===t.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Ve(e,n)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(n,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):Ve(n,e)}))}}()}},[[58,1,2]]]);
//# sourceMappingURL=main.18947236.chunk.js.map